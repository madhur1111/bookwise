<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Bookwise ‚Ä¢ Home</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    /* Recent Reviews Carousel */
    .recent-reviews {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 1rem 0;
    }
    .recent-reviews::-webkit-scrollbar { display: none; }
    .review-slide {
      flex: 0 0 250px;
      background: white;
      border-radius: 14px;
      padding: 1rem;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      scroll-snap-align: start;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .review-slide:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.15);
    }
    .review-slide h4 { margin: 0; font-size: 1.1rem; color: #374151; }
    .review-slide p { font-size: 0.9rem; color: #4b5563; margin: 0.3rem 0; }
    .review-slide .stars { color: #facc15; margin-top: 0.3rem; }
    .recent-reviews .review-slide:nth-child(n+16) { display: none; }

    /* Team Section */
    .team-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }
    .team-card {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .team-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 28px rgba(0,0,0,0.15);
    }
    .team-card img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 1rem;
      border: 3px solid #6366f1;
      animation: glowRing 3s infinite ease-in-out;
    }
    @keyframes glowRing {
      0% { box-shadow: 0 0 5px #6366f1, 0 0 10px #6366f1; }
      50% { box-shadow: 0 0 15px #818cf8, 0 0 30px #6366f1; }
      100% { box-shadow: 0 0 5px #6366f1, 0 0 10px #6366f1; }
    }
    .team-card h4 { margin: 0.3rem 0; font-size: 1.1rem; color: #111827; }
    .team-card p { font-size: 0.9rem; color: #6b7280; }

    @media (max-width: 600px) {
      .review-slide { flex: 0 0 200px; }
    }
  </style>
</head>
<body>
<header>
  <h1>üìö Bookwise</h1>
  <nav>
    <a href="/index.html">Home</a>
    <a href="/reviews.html">Reviews</a>
    <a href="/addReview.html">Add Review</a>
    <a href="/borrow.html">Borrow Records</a>
    <a href="/login.html" id="loginLink">Login</a>
    <a href="#" id="logoutLink" style="display:none">Logout</a>
  </nav>
</header>

<main class="container">
  <div class="card">
    <h2>Welcome to Bookwise</h2>
    <p class="muted">Discover reviews, add your thoughts, and manage borrowed books for the college library.</p>
    <div style="margin-top:12px">
      <a class="btn" href="/reviews.html">Browse Reviews</a>
      <a class="btn" href="/borrow.html" style="background:var(--cyan)">Borrow Records</a>
    </div>
  </div>

  <div class="card">
    <h2>Recent Reviews</h2>
    <div id="recent" class="recent-reviews"></div>
  </div>

  <div class="card">
    <h2>Team Members</h2>
    <div class="team-section">
     <div class="team-card">
      <img src="assets/avatars/avatar_1.jpg">
      <h4>Madhur Salunke</h4>
     <p></p>
    </div>
    <div class="team-card">
      <img src="assets/avatars/avatar_2.jpg">
      <h4>Rohan Sahoo</h4>
    <p></p>
   </div>  
   <div class="team-card">
    <img src="assets/avatars/wp1872438.webp">
    <h4>Siddesh Salunke</h4>
    <p></p>
  </div>
  <div class="team-card">
    <img src="assets/avatars/ii.webp">
    <h4>Charvi Sahani</h4>
      <p></p>
      </div>
    </div>

  </div>
</main>

<div id="toast"></div>

<script>
  function loadReviews() {
    fetch("https://bookwise-1-8sk2.onrender.com/api/reviews")
      .then(response => response.json())
      .then(data => {
        const reviewsContainer = document.getElementById("recent");
        reviewsContainer.innerHTML = "";
        data.slice(-15).forEach(review => {
          const div = document.createElement("div");
          div.className = "review-slide";
          div.innerHTML = `
            <h4>${review.book}</h4>
            <p>"${review.review}"</p>
            ${review.rating ? `<div class="stars">‚≠ê ${review.rating}/5</div>` : ""}
          `;
          reviewsContainer.appendChild(div);
        });
      })
      .catch(error => {
        console.error("Error:", error);
      });
  }

  function checkLogin() {
    const user = JSON.parse(localStorage.getItem("user"));
    const loginLink = document.getElementById("loginLink");
    const logoutLink = document.getElementById("logoutLink");

    if (user) {
      loginLink.style.display = "none";
      logoutLink.style.display = "inline";
    } else {
      loginLink.style.display = "inline";
      logoutLink.style.display = "none";
    }

    logoutLink.addEventListener("click", () => {
      localStorage.removeItem("token");
      localStorage.removeItem("user");
      location.reload();
    });
  }

  window.onload = () => {
    loadReviews();
    checkLogin();
  };
</script>

</body>
</html>
